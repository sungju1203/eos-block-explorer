/* eslint-env mocha */
const assert = require('assert')

const Eos = require('./src')

const keyProvider = [
  '5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3',
  // '5JCMLHSyJcx6mUCfJpvVod8WMAycq8v3bewrJbvzhp5nhfiVYsk',
  // '5JGByospJ5mUkameanYCwLzeYW9QUKLvu8Qvr3PTnj3LV35oXA8',
  // '5JMJebgWSzY9aU7SRKk7r9J1r8znkUSdUA5kUNUtzUZnVwjFn7V'
]

const res = (e,r) => console.log(r, e)

describe('./test', async function() {

  it('dawn3', async function() {
    const eos = Eos.Localnet({keyProvider, forceActionDataHex: false})
    const options = {broadcast: true}

    // const r = eos.fc.fromBuffer('transfer', '0000000000ea3055000000000093dd74010000000000000004454f5300000000046d656d6f')
    // console.log('r', r)

    // const abi = await eos.getCode('eosio')
    // console.log('code', abi)

    const t = await eos.transfer('inita', 'initb', '2.0001 EOS', 'memo', options)
    console.log('t', JSON.stringify(t.transaction, null, 0))
  })

  // it('actions', async function() {
  //   const msg = {
  //     "buyer":{ "name": "inita", "number": "1516073924"},
  //     "at_price":"5000000000000000",
  //     "expiration":"2018-12-31T23:59:59",
  //     "quantity": "100",
  //     "fill_or_kill": 0
  //   }
  // 
  //   const eos = Eos.Localnet({keyProvider})
  //   const ex = await eos.contract('exchange')
  //   const options = {authorization: ['inita@active']}
  //   return ex.buy(msg, options)
  // })


  // it('tic.tac.toe', async function() {
    
  //   eos = Eos.Localnet({keyProvider})
  // 
  //   const game = await eos.contract('tic.tac.toe')
  // 
  //   game.create()
  // 
  //   const create = await game.create(//'inita', 'initb',
  //     {challenger: 'inita', host: 'initb'},
  //     {
  //       broadcast: true,
  //       authorization: ['initb@active']
  //     }
  //   )
  // 
  //   console.log('create =', JSON.stringify(create))
  // 
  //   // const close = await t.close('inita', 'initb', {broadcast: true, authorization: ['inita@active', 'initb@active']})
  // 
  // 
  // })
})
